# on_actions to apply differential literacy modifiers based on enacted yMoG_PLP laws

on_law_enacted = {
    effect = {
        # Check if the enacted law belongs to yMoG_PLP Children's Rights
        if = {
            limit = { law.group = lawgroup_childrens_rights } # Assuming yMoG_PLP laws use this group
            trigger_switch = {
                on_trigger = law 
                law_child_labor_allowed = { apply_spa_diff_child_labor_allowed_effect = yes }
                law_restricted_child_labor = { apply_spa_diff_restricted_child_labor_effect = yes }
                law_compulsory_primary_school = { apply_spa_diff_compulsory_primary_school_effect = yes }
                # Add default after other yMoG_PLP_childrens_rights laws if any, or handle directly
                default = {
                    # If another law from this group is enacted that doesn't have a specific diff modifier
                    remove_spa_diff_childrens_rights_effects = yes
                }
            }
        }
        # Check if the enacted law belongs to yMoG_PLP Education System
        else_if = {
            limit = { law.group = lawgroup_education_system } # Assuming yMoG_PLP laws use this group
            trigger_switch = {
                on_trigger = law 
                law_religious_schools = { apply_spa_diff_religious_schools_effect = yes }
                law_private_schools = { apply_spa_diff_private_schools_effect = yes }
                law_public_schools = { apply_spa_diff_public_schools_effect = yes }
                law_no_schools = { remove_spa_diff_education_system_effects = yes } # No specific diff modifier, just clear others
                # Add default after other yMoG_PLP_education_system laws if any, or handle directly
                default = {
                    # If another law from this group is enacted that doesn't have a specific diff modifier
                    remove_spa_diff_education_system_effects = yes
                }
            }
        }
    }
}

on_game_start = {
    effect = {
        # Apply initial modifiers based on active yMoG_PLP Children's Rights laws
        # Need to ensure we're checking for the specific yMoG_PLP laws.
        # The has_law check works on the law key, which should be unique.
        if = {
            limit = { has_law = law_child_labor_allowed } # Assuming this is the key from yMoG_PLP_childrens_rights.txt
            apply_spa_diff_child_labor_allowed_effect = yes
        }
        else_if = {
            limit = { has_law = law_restricted_child_labor }
            apply_spa_diff_restricted_child_labor_effect = yes
        }
        else_if = {
            limit = { has_law = law_compulsory_primary_school }
            apply_spa_diff_compulsory_primary_school_effect = yes
        }
        else = { 
            # If none of the yMoG_PLP Children's Rights laws with specific diffs are active,
            # remove any existing diffs from this category.
            # This assumes other laws in this group (if any) don't get a differential modifier.
            remove_spa_diff_childrens_rights_effects = yes
        }

        # Apply initial modifiers based on active yMoG_PLP Education System laws
        if = {
            limit = { has_law = law_religious_schools } # Assuming this is the key from yMoG_PLP_education_system.txt
            apply_spa_diff_religious_schools_effect = yes
        }
        else_if = {
            limit = { has_law = law_private_schools }
            apply_spa_diff_private_schools_effect = yes
        }
        else_if = {
            limit = { has_law = law_public_schools }
            apply_spa_diff_public_schools_effect = yes
        }
        else_if = {
            limit = { has_law = law_no_schools }
            remove_spa_diff_education_system_effects = yes # No specific diff modifier for no_schools
        }
        else = {
            # If none of the yMoG_PLP Education System laws with specific diffs (or no_schools) are active,
            # remove any existing diffs from this category.
            remove_spa_diff_education_system_effects = yes
        }
    }
}
