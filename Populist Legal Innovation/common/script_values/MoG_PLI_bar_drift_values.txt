# These values closely replicate the scripted bar change values to set up drift effects on the progress bar
mog_pli_investment_tracking_bar_weekly_drift = {
	add = {
		# desc = "mog_pli_investment_tracking_bar_drift"
		# desc = "mog_pli_investment_increment_desc"
		if = {
			limit = { has_variable = mog_pli_investment_current_value }
			if = {
				limit = { mog_pli_investment_target < var:mog_pli_investment_current_value } # Target below current state.
				if = {
					limit = {
						mog_pli_investment_increment < {	# If increment is less than the gap, use the increment, else use the gap.
							value = mog_pli_investment_target
							subtract = var:mog_pli_investment_current_value
							multiply = -1
						}
					}
					add = {
						add = {
							value = mog_pli_investment_increment
							multiply = -1							# Move towards lower target.
						}
					#	desc = "mog_pli_investment_increment_desc"
					}
				}
				else = {
					add = { 
						add = { 
							value = mog_pli_investment_increment
							multiply = -1							# Move towards lower target.
							min = {
								value = mog_pli_investment_target
								subtract = var:mog_pli_investment_current_value		# Current value slightly bigger here, so result is -ve and result = target.
							}
						}
					#	desc = "mog_pli_investment_increment_desc"
					}
				}
			}
			else = { # Target above current state.
				if = {
					limit = {
						mog_pli_investment_increment < {	# If increment is less than the gap, use the increment, else use the gap.
							value = mog_pli_investment_target
							subtract = var:mog_pli_investment_current_value
						}
					}
					add = { 
						value = mog_pli_investment_increment	# Move towards higher target.
					#	desc = "mog_pli_investment_increment_desc"
					}
				}
				else = {
					add = { 
						value = mog_pli_investment_increment	# Move towards higher target.
						max =  {
							value = var:mog_pli_investment_current_value
							subtract = mog_pli_investment_target		# Current value slightly lower here, so result is +ve and result = target.
						}
						
					#	desc = "mog_pli_investment_increment_desc"
					}
				}
			}
		}
		#changed here, because the drift is a modified amount from the current value, we always add the current value
		add = var:mog_pli_investment_current_value
	}
	#divide by bar max because the drift is a 0-1 value
	divide = 100
}

#And then we do it again
mog_pli_corruption_tracking_bar_weekly_drift = {
	if = {
		limit = { pli_corruption_tracking_trigger = no }
		add = 0
	}
	else = {
		if = {
			limit = { has_variable = mog_pli_corruption_current_value }
			if = {
				limit = { mog_pli_corruption_target < var:mog_pli_corruption_current_value } # Target below current state.
				if = {
					limit = {
						mog_pli_corruption_increment < {	# If increment is less than the gap, use the increment, else use the gap.
							value = mog_pli_corruption_target
							subtract = var:mog_pli_corruption_current_value
							multiply = -1
						}
					}
					add = { 
						value = mog_pli_corruption_increment
						multiply = -1							# Move towards lower target.
					}
				}
				else = {
					add =  {
						value = mog_pli_corruption_target
						subtract = var:mog_pli_corruption_current_value		# Current value slightly bigger here, so result is -ve and result = target.
					}
				}
			}
			else = { # Target above current state.
				if = {
					limit = {
						mog_pli_corruption_increment < {	# If increment is less than the gap, use the increment, else use the gap.
							value = mog_pli_corruption_target
							subtract = var:mog_pli_corruption_current_value
						}
					}
					add = { 
						value = mog_pli_corruption_increment	# Move towards higher target.
					}
				}
				else = {
					add =  {
						value = var:mog_pli_corruption_current_value
						subtract = mog_pli_corruption_target		# Current value slightly lower here, so result is +ve and result = target.
					}
				}
			}
		}
		add = var:mog_pli_corruption_current_value
		divide = 100
	}
}

mog_pli_innovation_tracking_bar_weekly_drift = {
	add = {
		# desc = "mog_pli_innovation_tracking_bar_drift"
		# desc = "mog_pli_innovation_increment_desc"
		if = {
			limit = { has_variable = mog_pli_innovation_current_value }
			if = {
				limit = { mog_pli_innovation_target < var:mog_pli_innovation_current_value } # Target below current state.
				if = {
					limit = {
						mog_pli_innovation_increment < {	# If increment is less than the gap, use the increment, else use the gap.
							value = mog_pli_innovation_target
							subtract = var:mog_pli_innovation_current_value
							multiply = -1
						}
					}
					add = {
						add = {
							value = mog_pli_innovation_increment
							multiply = -1							# Move towards lower target.
						}
					#	desc = "mog_pli_innovation_increment_desc"
					}
				}
				else = {
					add = { 
						add = { 
							value = mog_pli_innovation_increment
							multiply = -1							# Move towards lower target.
							min = {
								value = mog_pli_innovation_target
								subtract = var:mog_pli_innovation_current_value		# Current value slightly bigger here, so result is -ve and result = target.
							}
						}
					#	desc = "mog_pli_innovation_increment_desc"
					}
				}
			}
			else = { # Target above current state.
				if = {
					limit = {
						mog_pli_innovation_increment < {	# If increment is less than the gap, use the increment, else use the gap.
							value = mog_pli_innovation_target
							subtract = var:mog_pli_innovation_current_value
						}
					}
					add = { 
						value = mog_pli_innovation_increment	# Move towards higher target.
					#	desc = "mog_pli_innovation_increment_desc"
					}
				}
				else = {
					add = { 
						value = mog_pli_innovation_increment	# Move towards higher target.
						max =  {
							value = var:mog_pli_innovation_current_value
							subtract = mog_pli_innovation_target		# Current value slightly lower here, so result is +ve and result = target.
						}
					#	desc = "mog_pli_innovation_increment_desc"
					}
				}
			}
		}
		add = var:mog_pli_innovation_current_value
	}
	divide = 100
}

mog_pli_proliferation_tracking_bar_weekly_drift = {
	if = {
		limit = { pli_proliferation_tracking_trigger = no }
		add = 0
	}
	else = {
		if = {
			limit = { has_variable = mog_pli_proliferation_current_value }
			if = {
				limit = { mog_pli_proliferation_target < var:mog_pli_proliferation_current_value } # Target below current state.
				if = {
					limit = {
						mog_pli_proliferation_increment < {	# If increment is less than the gap, use the increment, else use the gap.
							value = mog_pli_proliferation_target
							subtract = var:mog_pli_proliferation_current_value
							multiply = -1
						}
					}
					add = { 
						value = mog_pli_proliferation_increment
						multiply = -1							# Move towards lower target.
					}
				}
				else = {
					add =  {
						value = mog_pli_proliferation_target
						subtract = var:mog_pli_proliferation_current_value		# Current value slightly bigger here, so result is -ve and result = target.
					}
				}
			}
			else = { # Target above current state.
				if = {
					limit = {
						mog_pli_proliferation_increment < {	# If increment is less than the gap, use the increment, else use the gap.
							value = mog_pli_proliferation_target
							subtract = var:mog_pli_proliferation_current_value
						}
					}
					add = { 
						value = mog_pli_proliferation_increment	# Move towards higher target.
					}
				}
				else = {
					add =  {
						value = var:mog_pli_proliferation_current_value
						subtract = mog_pli_proliferation_target		# Current value slightly lower here, so result is +ve and result = target.
					}
				}
			}
		}
		add = var:mog_pli_proliferation_current_value
		divide = 100
	}
}